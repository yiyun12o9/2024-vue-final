import{r as l,u as h,o as k,a as x,b,c as C,d as t,w as m,v as c,e as _,f as y,g as T}from"./index-C3yVTd9A.js";import{a as I,S as n}from"./sweetalert2.esm.all-DYEfS7jK.js";const S={id:"loginPage",class:"bg-yellow"},P={class:"conatiner loginPage vhContainer"},V={class:"formControls",action:"index.html"},p="https://todolist-api.hexschool.io",N={__name:"LoginPage",setup(B){var d;const a=l({email:"",password:""}),r=l(""),g=h(),s=l(""),f=l(""),v=async()=>{console.log(`${p}/users/sign_in`);try{const e=await I.post(`${p}/users/sign_in`,a.value);r.value=e.data.token,f.value=e.data.nickname,document.cookie=`customTodoToken=${e.data.token};`,s.value="登入成功(｡･∀･)ﾉﾞ",e.status==200&&(n.fire({icon:"success",title:s.value,showConfirmButton:!1,timer:1500}),g.push("/TodolistPage"))}catch(e){e.status==400?(s.value="未正確填寫欄位(´･Д･)」",n.fire({icon:"error",title:s.value,text:e.response.data.message.join(" / ")})):e.status==401?(s.value="密碼輸入錯誤(´･Д･)」",n.fire({icon:"error",title:s.value})):e.status==404?(s.value="用戶不存在(´･Д･)」",n.fire({icon:"error",title:s.value})):(s.value="登入失敗(´･Д･)」",n.fire({icon:"error",title:s.value,text:e.response.data.message}))}},u=(d=document.cookie.split("; ").find(e=>e.startsWith("hexschoolTodo=")))==null?void 0:d.split("=")[1];return k(()=>{u&&(r.value=u)}),(e,o)=>{const w=x("RouterLink");return b(),C("div",S,[t("div",P,[o[6]||(o[6]=t("div",{class:"side"},[t("a",{href:"#"},[t("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),t("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),t("div",null,[t("form",V,[o[3]||(o[3]=t("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1)),o[4]||(o[4]=t("label",{class:"formControls_label",for:"email"},"Email",-1)),m(t("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":o[0]||(o[0]=i=>a.value.email=i)},null,512),[[c,a.value.email]]),o[5]||(o[5]=t("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),m(t("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":o[1]||(o[1]=i=>a.value.password=i)},null,512),[[c,a.value.password]]),t("input",{class:"formControls_btnSubmit",type:"button",onClick:v,value:"登入"}),_(w,{to:"/SignupPage",class:"formControls_btnLink"},{default:y(()=>o[2]||(o[2]=[T("註冊帳號")])),_:1})])])])])}}};export{N as default};
