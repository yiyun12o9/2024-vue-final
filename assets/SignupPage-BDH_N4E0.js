import{r as u,u as v,c as g,a as s,w as n,v as r,b as c,d as w,S as i,e as b,f as C,o as x,g as k}from"./index-NA5AE1ae.js";const y={id:"signUpPage",class:"bg-yellow"},U={class:"conatiner signUpPage vhContainer"},V={class:"formControls",action:"index.html"},_="https://todolist-api.hexschool.io",B={__name:"SignupPage",setup(h){const o=u({email:"",password:"",password2:"",nickname:""}),p=u(""),d=v(),l=u(""),m=async()=>{if(o.value.email!=""&&o.value.nickname!=""&&o.value.password!=o.value.password2)l.value="註冊失敗(´･Д･)」",i.fire({icon:"error",title:l.value,text:"密碼輸入不一致"});else try{const t=await b.post(`${_}/users/sign_up`,o.value);p.value=t.data.uid,l.value="註冊成功(｡･∀･)ﾉﾞ",t.status==201&&(i.fire({icon:"success",title:l.value,showConfirmButton:!1,timer:1500}),d.push("/"))}catch(t){console.log(t),t.response.data.message=="用戶已存在"?(l.value="註冊失敗(´･Д･)」",i.fire({icon:"error",title:l.value,text:t.response.data.message})):(l.value="註冊失敗(´･Д･)」",i.fire({icon:"error",title:l.value,text:t.response.data.message.join(" / ")}))}};return(t,e)=>{const f=C("RouterLink");return x(),g("div",y,[s("div",U,[e[10]||(e[10]=s("div",{class:"side"},[s("a",{href:"#"},[s("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),s("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1)),s("div",null,[s("form",V,[e[5]||(e[5]=s("h2",{class:"formControls_txt"},"註冊帳號",-1)),e[6]||(e[6]=s("label",{class:"formControls_label",for:"email"},"Email",-1)),n(s("input",{class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:"","onUpdate:modelValue":e[0]||(e[0]=a=>o.value.email=a)},null,512),[[r,o.value.email]]),e[7]||(e[7]=s("label",{class:"formControls_label",for:"name"},"您的暱稱",-1)),n(s("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":e[1]||(e[1]=a=>o.value.nickname=a)},null,512),[[r,o.value.nickname]]),e[8]||(e[8]=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1)),n(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:"","onUpdate:modelValue":e[2]||(e[2]=a=>o.value.password=a)},null,512),[[r,o.value.password]]),e[9]||(e[9]=s("label",{class:"formControls_label",for:"pwd"},"再次輸入密碼",-1)),n(s("input",{class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請再次輸入密碼",required:"","onUpdate:modelValue":e[3]||(e[3]=a=>o.value.password2=a)},null,512),[[r,o.value.password2]]),s("input",{class:"formControls_btnSubmit",type:"button",onClick:m,value:"註冊帳號"}),c(f,{to:"/",class:"formControls_btnLink"},{default:w(()=>e[4]||(e[4]=[k("登入")])),_:1})])])])])}}};export{B as default};
